# 1.gcc编译选项

**-c** 只编译，不链接。编译器将输入的**.c**文件编译为**.o**目标文件

**-o <输出文件名>** 用来指定编译结束后的输出文件名，不使用这个选项的话，*gcc* 默认编译出来的可执行文件是*a.out*

**-g** 添加调试信息

**-O** 对程序进行优化编译，使用此选项时，整个源代码在编译、链接的时候都会进行优化

**-O2** 比**-O** 更大幅度的优化

**-wall** 启用警告信息

**-I** *dir* 把*dir*加入到搜索头文件的路径列表中

**-L** *dir* 把*dir*加入到搜索头文件的路径列表中

# 2.存储地址与运行地址

存储地址是可执行文件存储在哪里，可执行文件的存储地址可以随意选择。运行地址是代码运行时所处的地址，这个是在链接的时候就确定好了，代码要运行，那就必须处于运行地址处，否则代码肯定运行出错。存储地址和运行地址可以一样，比如*STM32*的存储地址和运行地址都是*0x08000000*。在格力芯片*F6721B*中，存储地址就与运行地址不同，存储地址在*nor flash*中，但是运行在*sdram*中。

# 3.ld编译选项

*ubuntu*自带的*gcc*和*ld*是支持X86架构的，而嵌入式端常用的是*ARM*架构，所以需要安装的是*arm-linux-gnueabihf-gcc*和*arm-linux-gnueabihf-ld*。关于*arm-linux-gnueabihf-ld*的选项参数可以通过*arm-linux-gnueabihf-ld* *--help*来查看。一些常用的选项如下：

**-Ttext address** 指定代码段链接地址为*address*。即将**.o**文件代码段编译到该地址处

**-Tdata address** 指定数据段的链接地址为*address*。

**-Tbss address** 指定*bss*段的链接地址为*address*。

**-o FILE** 指定链接后生成的文件名为*FILE*。一般是生成*elf*文件。

# 4.Makefile中%与*区别

此两者均为通配符，更准确地说，*%*为*Makefile*规则通配符，一般用于规则描述，如：

*%.o:%.c*

​	*$(CC) $< -o $@*

表示所有的目标文件及其依赖文件，或者

*$(filter %.c,SOURCE)*

此处*SOURCE*表示包含*.c*、*.h*等多类型源文件，该过滤器将*c*文件过滤出来，而*%.c*即为此过滤器规则

通配符\*则不具备上述功能。尤其是在*Makefile*，当变量定义或者函数调用时，该通配符的展开功能就失效了。即不能正常使用了。此时需要借助*wildcard*函数，两个通配符的应用范围不同。





- [x] wode
- [x] 









 



